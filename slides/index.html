<!DOCTYPE html>
<html lang="en-AU">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, max-scale=1, user-scalable=0">

    <title>Animating loading spinners with CSS | SydCSS Talk</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Presentation styles -->
    <link rel="stylesheet" href="css/styles.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <!-- SLIDE: Intro -->
        <section>
          <h1>Animating loading spinners with CSS</h1>
          <hr>
          <p>
            <strong>Ben Booth</strong><br>
            Blake eLearning<br>
            <a href="https://twitter.com/bkbooth11" target="_blank">@bkbooth11</a><br>
            <a href="https://bkbooth.me" target="_blank">bkbooth.me</a>
          </p>

          <aside class="notes">
            <p>Hi, I'm Ben and I make things for the web. I'm currently paid to make things for the web by Blake eLearning. I'm on Twitter as at-bkbooth11. I also have a blog at bkbooth.me where I write things from time to time, though far less regularly than I'd like to.</p>
            <p>Today we're going to look at CSS animations by looking at some loading animations and spinners.</p>
          </aside>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Topic intro -->
        <section>
          <section>
            <pre><code class="language-css" data-trim>
              @keyframes my-sweet-animation {
                  0% { /* ... */ }
                 50% { /* ... */ }
                100% { /* ... */ }
              }
            </code></pre>

            <aside class="notes">
              There are two basic building blocks for CSS animations. Firstly the <code>keyframes</code> at-rule, which you define with the at-<code>keyframes</code> keyword, then a name or identifier for the <code>keyframes</code> set, then a list of steps which define CSS properties for each step.
            </aside>
          </section>

          <section>
            <pre><code class="language-css" data-trim>
              @keyframes my-sweet-animation { /* ... */ }

              .thing-to-animate {
                /* shorthand */
                animation: 2s my-sweet-animation;

                /* individual sub-properties */
                animation-name: my-sweet-animation;
                animation-duration: 2s;
                animation-timing-function: ease;
              }
            </code></pre>

            <aside class="notes">
              Secondly the <code>animation</code> properties which you can use in shorthand form, or by using individual sub-properties.
            </aside>
          </section>

          <section>
            <ul style="list-style-type: none;">
              <li><code>animation-name</code></li>
              <li><code>animation-duration</code></li>
              <li><code>animation-delay</code></li>
              <li><code>animation-direction</code></li>
              <li><code>animation-iteration-count</code></li>
              <li><code>animation-timing-function</code></li>
              <li><code>animation-fill-mode</code></li>
              <li><code>animation-play-state</code></li>
            </ul>

            <aside class="notes">
              There are only 8 animation sub-properties, but they provide a great deal of flexibility.
            </aside>
          </section>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Animation 1 - fading -->
        <section>
          <section>
            <div id="fading-1" class="code-preview">
              <div class="circle"></div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="fading-1" contenteditable>
              @keyframes fade-out-in {
                  0% { opacity: 1; }
                 50% { opacity: 0; }
                100% { opacity: 1; }
              }

              .circle {
                animation: 1s fade-out-in infinite;
              }
            </code></pre>

            <aside class="notes">
              Let's start with a simple fading dot animation, which is just a square with rounded corners where the <code>opacity</code> is being faded in and out. I've defined the <code>keyframes</code> at-rule with 3 steps going from completely visible, to completely invisible, then back to completely visible. To use these <code>keyframes</code> to animate the dot, I've used the <code>animation</code> shorthand property to set the <code>animation-duration</code> to 1 second; the <code>animation-name</code> to <i>'fade-in-out'</i> which matches <code>keyframes</code> at-rule; and <i>'infinite'</i> for the <code>animation-iteration-count</code>. <code>animation-iteration-count</code> can be a number or <i>'infinite'</i> and defaults to 1. <b>(!!!LIVE EDIT!!!)</b> As you can see this isn't very useful for this type of animation, so I'll be using <i>'infinite'</i> for all of these animations. You can tweak the speed of the animation by modifying the <code>animation-duration</code> property <b>(!!!LIVE EDIT!!!)</b> which takes seconds or milliseconds values.
            </aside>
          </section>

          <section>
            <div id="fading-2" class="code-preview">
              <div class="circle"></div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="fading-2" contenteditable>
              @keyframes fade-out {
                  0% { opacity: 1; }
                100% { opacity: 0; }
              }

              .circle {
                animation: 0.5s fade-out infinite alternate;
              }
            </code></pre>

            <aside class="notes">
              In this case the <code>keyframes</code> at-rule can be simplified to just the start and end steps by setting the <code>animation-direction</code> property to <i>'alternate'</i>, which means the animation goes forward through the <code>keyframes</code> steps, then back through in reverse. Now that a full animation loop goes through the <code>keyframes</code> twice, the <code>animation-duration</code> should be halved. This approach means that you can define more generic and reusable <code>keyframes</code> at-rules. You may also see <i>'from'</i> <b>(!!!LIVE EDIT!!!)</b> and <i>'to'</i> instead of percentages for <code>keyframes</code> steps, these are just aliases for <i>'0%'</i> and <i>'100%'</i> respectively. I personally prefer to stick with percentage steps.
            </aside>
          </section>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Animation 2 - spinning -->
        <section>
          <section>
            <div id="spinning-1" class="code-preview" style="margin-bottom: 50px;">
              <div class="star"></div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="spinning-1" contenteditable>
              @keyframes rotate {
                  0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
              }

              .star {
                animation: 2.5s linear rotate infinite;
              }
            </code></pre>

            <aside class="notes">
              Spinners are another simple animation that can be defined easily in CSS. I've introduced the <code>transform</code> property to handle the rotation, <code>transform</code> provides a great toolset functions for 2D and 3D translating (as in movement), scaling and rotation. It's enough for a talk on it's own but we'll just dip our toes in here. The <i>'rotate'</i> <code>keyframes</code> at-rule just sets the starting rotation to <i>'0deg'</i> and the ending rotation to <i>'360deg'</i>. The <code>animation</code> shorthand property now sets the <code>animation-timing-function</code> property to 'linear'. <code>animation-timing-function</code> defaults to <i>'ease'</i> to ease the animation in and out. This caused the fading dot to "breathe" in and out <b>(!!!QUICKLY BACK TO LAST SLIDE!!!)</b>. If I set it to <i>'ease'</i> here it speeds up and slows down, for rotation you always want a nice even linear animation.
            </aside>
          </section>

          <section>
            <div id="spinning-2" class="code-preview">
              <div class="circles">
                <div class="circle-1"></div>
                <div class="circle-2"></div>
              </div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="spinning-2" contenteditable>
              .circle-1 {
                animation: 1s linear rotate infinite;
              }
              .circle-2 {
                animation: 60s linear rotate infinite;
              }
            </code></pre>

            <aside class="notes">
              <p>Using the same rotation <code>keyframes</code> at-rule you can create more complex animations by just combining things we've already looked at. These clock-like concentric circles aren't telling us the actual time, but the outer circle is rotating once a second and the inner circle is rotating once a minute. Another value that you can set for the <code>animation-direction</code> property is <i>'reverse'</i> <b>(!!!LIVE EDIT!!!)</b> which as you can probably guess, plays the <code>keyframes</code> in reverse. I'll speed it up to make it more obvious. Now it's nothing like a clock, but it's... interesting?</p>

              <p>You can use the same <code>keyframes</code> to rotate pretty much anything you want...</p>
            </aside>
          </section>

          <section>
            <div id="spinning-3" class="code-preview">
              <div class="doge">
                <img data-src="images/doge.png">
              </div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="spinning-3" contenteditable>
              .doge {
                animation: 1.5s linear rotate infinite;
              }
            </code></pre>

            <aside class="notes">
              ...like doge.
            </aside>
          </section>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Animation 3 - chasing -->
        <section>
          <section>
            <div id="chaser-1" class="code-preview">
              <div class="dots">
                <div class="dot-1"></div>
                <div class="dot-2"></div>
                <div class="dot-3"></div>
                <div class="dot-4"></div>
                <div class="dot-5"></div>
                <div class="dot-6"></div>
                <div class="dot-7"></div>
                <div class="dot-8"></div>
              </div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="chaser-1" contenteditable>
              @keyframes fade-in {
                  0% { opacity: 0.2; }
                100% { opacity: 1; }
              }

              [class^=dot-] {
                animation: 500ms ease-in fade-in infinite alternate;
              }
              .dot-1 { animation-delay: 0s; }
              .dot-2 { animation-delay: 125ms; }
              .dot-3 { animation-delay: 250ms; }
              .dot-4 { animation-delay: 375ms; }
              .dot-5 { animation-delay: 500ms; }
              .dot-6 { animation-delay: 625ms; }
              .dot-7 { animation-delay: 750ms; }
              .dot-8 { animation-delay: 875ms; }
            </code></pre>

            <aside class="notes">
              For this animation I've arranged a series of small dots around a circle and used a similar <code>keyframes</code> at-rule as earlier, fading the dots in and out to 20% opacity. The main <code>animation</code> shorthand property adds nothing new and is being applied to all of the individual dots with this fun little selector. I've set an <code>animation-delay</code> for each of the dots to offset each of them starting by an 1/8th of a second. As you can see it's a little tedious having to manually set the offset for each dot, especially if you wanted to change the speed of the whole animation.
            </aside>
          </section>

          <section>
            <pre><code class="language-scss" data-trim>
              // SASS
              $animation_speed: 1s;
              $number_of_dots: 8;

              [class^=dot-] {
                animation:
                  ($animation_speed / 2) ease-in fade-in infinite alternate;
              }
              @for $i from 1 through $number_of_dots {
                .dot-#{$i} {
                  animation-delay:
                    ($animation_speed / $number_of_dots) * ($i - 1);
                }
              }
            </code></pre>

            <aside class="notes">
              If you're using SASS or something similar, you can simplify this by setting the desired animation speed and the number of dots in variables. Halve the animation speed for the <code>animation</code> property definition. Then loop through the number of dots and calculate the <code>animation-delay</code> for each dot using the desired animation speed, number of dots and current iteration variables.
            </aside>
          </section>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Animation 4 - bouncing -->
        <section>
          <section>
            <div id="bouncing-1" class="code-preview">
              <div class="ball-container">
                <div class="ball"></div>
              </div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="bouncing-1" contenteditable>
              @keyframes bounce {
                  0% { transform: translateY(0); }
                100% { transform: translateY(-200%); }
              }

              .ball {
                animation: 300ms bounce infinite alternate;
                animation-timing-function:
                  cubic-bezier(0.38, 0.17, 0.11, 0.85);
              }
            </code></pre>

            <aside class="notes">
              This bouncing dot animation uses yet another fairly simple <code>keyframes</code> at-rule, it's just using the <code>transform</code> property to translate the dot up and down. To make it look more "bouncy" I've defined a <i>'cubic-bezier'</i> function for the <code>animation-timing-function</code> property. If that looks a little daunting to you, don't worry, I didn't actually write this, and you should never need to write one of these by hand...
            </aside>
          </section>

          <section>
            <img data-src="images/cubic-bezier.png" style="margin-top: 60px; width: 60%;">

            <aside class="notes">
              Chrome (and possibly other browsers?) has an awesome bezier curve editor where you can just drag some dots to visually create the cubic-bezier curve and it will write the cubic-bezier function for you.
            </aside>
          </section>

          <section>
            <div id="bouncing-2" class="code-preview">
              <div class="balls">
                <div class="ball-1"></div>
                <div class="ball-2"></div>
                <div class="ball-3"></div>
              </div>
            </div>

            <pre><code class="liveCoding css" data-trim data-livecoding-id="bouncing-2" contenteditable>
              @keyframes bounce-3rd {
                  0% { transform: translateY(0); }
                 16% { transform: translateY(-125%); }
                 33% { transform: translateY(0); }
                100% { transform: translateY(0); }
              }

              [class^=ball-] {
                animation: 800ms ease-out bounce-3rd infinite;
              }
              .ball-1 { animation-delay: 0s; }
              .ball-2 { animation-delay: 150ms; }
              .ball-3 { animation-delay: 300ms; }
            </code></pre>

            <aside class="notes">
              Finally, to create this excitedly impatient series of dots, I've defined a slightly more complex <code>keyframes</code> at-rule which performs the translation up and down in just the first 1/3rd of the time. I've also set an <code>animation-delay</code> for each of the dots in the series to offset them starting.
            </aside>
          </section>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Browser support -->
        <section>
          <img data-src="images/mdn-animations.png">
          <img data-src="images/caniuse-animations.png">

          <aside class="notes">
            Most of what I've talked about today is relatively new to the CSS spec but support in modern browsers is actually really good. Depending what browsers you need to target though you'll get a lot of mileage out of using autoprefixer to process your CSS and automatically add any required vendor prefixes like <code>-webkit</code>, <code>-moz</code>, etc.
          </aside>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Follow-up links -->
        <section>
          <ul style="list-style-type: none;">
            <li>
              <code>@keyframes</code><br>
              <small><a href="https://developer.mozilla.org/en/docs/Web/CSS/@keyframes" target="_blank">https://developer.mozilla.org/en/docs/Web/CSS/@keyframes</a></small>
            </li>
            <li>
              <code>animation</code><br>
              <small><a href="https://developer.mozilla.org/en/docs/Web/CSS/animation" target="_blank">https://developer.mozilla.org/en/docs/Web/CSS/animation</a></small>
            </li>
            <li>
              Using CSS animations<br>
              <small><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations" target="_blank">https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations</a></small>
            </li>
          </ul>

          <aside class="notes">
            MDN is a great learning resources for understanding the CSS properties and rules. There's also a really helpful guide on using CSS animations.
          </aside>
        </section>
        <!-- /SLIDE -->

        <!-- SLIDE: Thanks -->
        <section>
          <h3>🎉 Thanks for listening 🎉</h3>

          <aside class="notes">
            Thanks to David and Fiona for giving us this opportunity, and thanks to all of you for listening.
          </aside>
        </section>
        <!-- /SLIDE -->
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script src="js/scripts.js"></script>
  </body>
</html>
